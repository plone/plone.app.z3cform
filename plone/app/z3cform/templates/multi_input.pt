<div class="${view/klass}"
     i18n:domain="plone"
>
  <tal:block repeat="widget view/widgets">
    <div class="multi-widget-field field pat-inlinevalidation ${fieldname_class}${error_class}"
         id="formfield-${widget/id}"
         metal:define-macro="widget-row"
         data-pat-inlinevalidation="{'type':'z3c.form'}"
         tal:define="
           hidden python:widget.mode == 'hidden';
           showLabel view/showLabel;
           checkbox_disabled python:'disabled' if not view.allowRemoving else None;
           index repeat/widget/index;
           key_widget python:view.key_widgets[index];
           error widget/error;
           key_error key_widget/error|nothing;
           error_class python:' error' if (error or key_error) else '';
           fieldname_class string:kssattr-fieldname-${widget/name};
         "
    >

      <input class="multi-widget-checkbox checkbox-widget"
             disabled="${checkbox_disabled}"
             id="${widget/id}-remove"
             name="${widget/name}.remove"
             type="checkbox"
             value="1"
      />
      <label class="form-label horizontal"
             for="${key_widget/id}"
             tal:condition="python:key_widget is not None and showLabel and not hidden"
      ><span tal:replace="key_widget/label"
              i18n:translate=""
        >label</span>
        <span class="multi-widget-number"
              tal:content="repeat/widget/number"
        >1</span>
        <span class="required horizontal"
              title="Required"
              tal:condition="python:key_widget.required and not hidden"
              i18n:attributes="title title_required;"
        >&nbsp;</span>
        <span class="formHelp"
              tal:define="
                description key_widget/field/description;
              "
              tal:condition="python:description and showLabel and not hidden"
              tal:content="description"
              i18n:translate=""
        >field description
        </span>
      </label>

      <div class="fieldErrorBox"
           tal:content="structure key_error/render|nothing"
      >
                Error
      </div>

      <input type="text"
             tal:condition="python:key_widget is not None"
             tal:replace="structure key_widget/render"
      />

      <br />

      <label class="form-label horizontal"
             for="${widget/id}"
             tal:condition="python:showLabel and not hidden"
      >
        <span tal:replace="widget/label"
              i18n:translate=""
        >label</span>
        <span class="multi-widget-number"
              tal:content="repeat/widget/number"
        >1</span>
        <span class="required horizontal"
              title="Required"
              tal:condition="python:widget.required and not hidden"
              i18n:attributes="title title_required;"
        >&nbsp;</span>
        <span class="formHelp"
              tal:define="
                description widget/field/description;
              "
              tal:condition="python:description and showLabel and not hidden"
              tal:content="description"
              i18n:translate=""
        >field description
        </span>
      </label>

      <div class="fieldErrorBox"
           tal:content="structure error/render|nothing"
      >
                Error
      </div>

      <input type="text"
             tal:replace="structure widget/render"
      />
    </div>
  </tal:block>
  <div class="formControls multi-widget-buttons"
       tal:condition="view/actions/values|nothing"
  >
    <tal:block repeat="action view/actions/values">
      <input type="submit"
             tal:replace="structure action/render"
      />
    </tal:block>
  </div>
  <input type="hidden"
         tal:replace="structure view/counterMarker"
  />
</div>
