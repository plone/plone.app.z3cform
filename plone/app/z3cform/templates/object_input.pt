<div class="object-widget"
     tal:attributes="
       class view/klass;
     "
     i18n:domain="plone"
>
  <tal:block repeat="widget python:view.widgets.values()">
    <div tal:define="
           hidden python:widget.mode == 'hidden';
           error widget/error;
           error_class python:error and ' error' or '';
           fieldname_class string:kssattr-fieldname-${widget/name};
         "
         tal:attributes="
           class string:object-widget-field field ${fieldname_class}${error_class};
           data-fieldname widget/name;
           id string:formfield-${widget/id};
         "
    >

      <label class="form-label horizontal"
             for=""
             tal:condition="not:hidden"
             tal:attributes="
               for widget/id;
             "
      >
        <span tal:replace="widget/label"
              i18n:translate=""
        >label</span>

        <span class="required horizontal"
              title="Required"
              tal:condition="python:widget.required and not hidden"
              i18n:attributes="title title_required;"
        >&nbsp;</span>

        <span class="formHelp"
              tal:define="
                description widget/field/description;
              "
              tal:condition="python:description and not hidden"
              tal:content="description"
              i18n:translate=""
        >field description
        </span>
      </label>

      <div class="fieldErrorBox"
           tal:content="structure error/render|nothing"
      >
                Error
      </div>

      <input type="text"
             tal:replace="structure widget/render"
      />
    </div>
  </tal:block>
  <input name="field-empty-marker"
         type="hidden"
         value="1"
         tal:attributes="
           name string:${view/name}-empty-marker;
         "
  />
</div>
