<div class="${view/klass}"
     i18n:domain="plone"
>
  <tal:block repeat="widget view/subform/widgets/values">
    <div class="object-widget-field field pat-inlinevalidation ${fieldname_class}${error_class}"
         id="formfield-${widget/id}"
         data-fieldname="${widget/name}" 
         data-pat-inlinevalidation="{'type':'z3c.form'}"
         tal:define="
           hidden python:widget.mode == 'hidden';
           error widget/error;
           error_class python:error and ' error' or '';
           fieldname_class string:kssattr-fieldname-${widget/name};
         "
    >

      <label class="form-label horizontal"
             for="${widget/id}"
             tal:condition="not:hidden"
      >
        <span tal:replace="widget/label"
              i18n:translate=""
        >label</span>

        <span class="required horizontal"
              title="Required"
              tal:condition="python:widget.required and not hidden"
              i18n:attributes="title title_required;"
        >&nbsp;</span>

        <span class="formHelp"
              tal:define="
                description widget/field/description;
              "
              tal:condition="python:description and not hidden"
              tal:content="description"
              i18n:translate=""
        >field description
        </span>
      </label>

      <div class="fieldErrorBox"
           tal:content="structure error/render|nothing"
      >
                Error
      </div>

      <input type="text"
             tal:replace="structure widget/render"
      />
    </div>
  </tal:block>
  <input name="${view/name}-empty-marker"
         type="hidden"
         value="1"
  />
</div>
